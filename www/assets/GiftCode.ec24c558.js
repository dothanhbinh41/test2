import{b5 as b,b3 as m,b6 as S,b7 as x,aI as R,aJ as k,aK as C,aL as I,aM as A,aN as M,aO as c,a$ as E,b0 as L,aV as T,aR as V,aP as G,b1 as P,b2 as $}from"./index.e82e929c.js";function h(){return h=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},h.apply(this,arguments)}var O=function(){var e=!1,t=[],a=function(){if(!e){e=!0;for(var n=0,f=t.length;n<f;n++)t[n]()}},o=function(n){if(!e){t.push(n);return}n()},d={resolved:function(){return e},resolve:a,promise:{then:o}};return d},_=Object.prototype.hasOwnProperty;function j(){var r=O();return{notify:function(){r.resolve()},wait:function(){return r.promise},render:function(t,a,o){this.wait().then(function(){o(window.grecaptcha.render(t,a))})},reset:function(t){typeof t!="undefined"&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(t)}))},execute:function(t){typeof t!="undefined"&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(t)}))},checkRecaptchaLoad:function(){_.call(window,"grecaptcha")&&_.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!r.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var u=j();typeof window!="undefined"&&(window.vueRecaptchaApiLoaded=u.notify);var N=b({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,t){var a=t.slots,o=t.emit,d=m(null),s=m(null),n=function(l){o("verify",l)},f=function(){o("expired")},y=function(){o("error")};return S(function(){if(u.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var i=document.createElement("script");i.id=e.recaptchaScriptId,i.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,i.async=!0,i.defer=!0,document.head.appendChild(i)}var l=h({},e,{callback:n,"expired-callback":f,"error-callback":y}),v=d.value,w=a.default?v.children[0]:v;u.render(w,l,function(g){s.value=g,o("render",g)})}),{root:d,widgetId:s,reset:function(){u.reset(s.value)},execute:function(){u.execute(s.value)}}},render:function(){var e=this.$slots.default,t;return typeof e=="function"?t=e():t=e,x("div",{ref:"root"},t)}});const q="api/app/gift/use-gift-code",B=R({id:"giftcode",state:()=>({giftcode:[]}),getters:{},actions:{giftcode(r={}){return new Promise((e,t)=>{k.post(`/${q}`,r).then(({data:a})=>{e(a)}).catch(({response:a})=>{t(a)})})}}});const H={name:"GiftCode",components:{VueRecaptcha:N},data(){return{check_capcha:!1,giftcode:"",capchaToken:""}},setup(){return{useGiftcodeStore:B()}},methods:{verifyMethod(r){this.capchaToken=r,this.check_capcha=!0},expiredMethod(r){},renderMethod(r){},errorMethod(r){},getReward(){let r={code:this.giftcode,capchaToken:this.capchaToken};this.useGiftcodeStore.giftcode(r).then(e=>{this.$notify.success({title:"Success",message:"\xC1p d\u1EE5ng m\xE3 th\u01B0\u1EDFng th\xE0nh c\xF4ng"}),this.$router.go()}).catch(e=>{this.$notify.error({title:"Success",message:"\xC1p d\u1EE5ng m\xE3 th\u01B0\u1EDFng th\u1EA5t b\u1EA1i"})})}},mounted(){}},p=r=>(P("data-v-3d1289ff"),r=r(),$(),r),z=p(()=>c("div",{class:"title mb-4"},"M\xE3 qu\xE0 t\u1EB7ng",-1)),D={class:"card"},F={class:"card-body"},J={class:"container-fluid"},K={class:"mb-3 row"},U=p(()=>c("div",{class:"col-sm-3 flex justify-start items-center"},[c("span",null,"M\xE3 qu\xE0 t\u1EB7ng")],-1)),Z={class:"col-sm-9"},Q={class:"mb-3 row"},X=p(()=>c("div",{class:"col-sm-3"},null,-1)),W={class:"col-sm-9"};function Y(r,e,t,a,o,d){const s=I("vue-recaptcha");return A(),M(G,null,[z,c("div",D,[c("div",F,[c("div",J,[c("div",K,[U,c("div",Z,[E(c("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.giftcode=n),class:"text-14 form-control",type:"text",name:"giftcode",placeholder:"Nh\u1EADp m\xE3 qu\xE0 t\u1EB7ng"},null,512),[[L,o.giftcode]])])]),c("div",Q,[X,c("div",W,[T(s,{ref:"recaptcha",sitekey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",onVerify:e[1]||(e[1]=n=>d.verifyMethod(n))},null,512),c("button",{class:V(`mt-3 btn btn-success ${o.check_capcha&&o.giftcode?"":" button-disabled"}`),onClick:e[2]||(e[2]=(...n)=>d.getReward&&d.getReward(...n))}," Nh\u1EADn th\u01B0\u1EDFng ",2)])])])])])],64)}var te=C(H,[["render",Y],["__scopeId","data-v-3d1289ff"]]);export{te as default};
